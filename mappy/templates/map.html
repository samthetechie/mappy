<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>Mappy</title>

    {% if MOBILE %}
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <script type="text/javascript">
        function hideAddressBar(){
            if (document.documentElement.scrollHeight<window.outerHeight/window.devicePixelRatio)
                document.documentElement.style.height=(window.outerHeight/window.devicePixelRatio)+'px';
                setTimeout(window.scrollTo(1,1),0);
        }
        window.addEventListener("load",function(){hideAddressBar();});
        window.addEventListener("orientationchange",hideAddressBar());
    </script>
    {% endif %}

    <script src="http://cdn.pubnub.com/pubnub-3.1.min.js"></script>

    <script src="http://code.leafletjs.com/leaflet-0.3.1/leaflet.js"></script>
    <link rel="stylesheet" href="http://code.leafletjs.com/leaflet-0.3.1/leaflet.css" />
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="http://code.leafletjs.com/leaflet-0.3.1/leaflet.ie.css" />
    <![endif]-->

    {% if MOBILE and config.DEBUG and config.JSCONSOLE_KEY %}
    <script src="http://jsconsole.com/remote.js?{{ config.JSCONSOLE_KEY }}"></script>
    {% endif %}

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="{{ url_for('static', filename='js/map.js') }}"></script>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/normalize.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />

    <script type="text/javascript">
        var TILES_URL = '{{ config.TILES_URL }}'
        ,   API = {
                add: "{{ url_for('add_feature') }}"
            };
    </script>
</head>
<body>
    <div id="pubnub" sub-key="{{ config.PUBNUB_SUB_KEY }}"></div>
    <div id="map"></div>
</body>
</html>